名词解释

进程: 是一个具有独立功能的程序在一个数据集上的一个动态执行的过程, 是操作系统进行资源和调度分配的独立单位, 也是应用程序的载体

线程: 程序执行中的一个单一数据流, 存在于进程之中, 比进程更小的独立运行单位

## 单线程?

我们常说 Node 是单线程, 但是...这个只是针对一次 js 代码的运行, 对于 Node 整体却不是这样

一个 Node 进程一般包括: 一个 js 主运行线程, 一个 watchdog 监控线程用于处理调试信息, 一个 v8 task scheduler 线程进行任务调度, 4 个 v8 线程, 以及用于 io 的 libuv 线程池



## 子进程

node 通过事件循环机制实现了 IO 密集型, 但是仅仅这样还是不行, 对于 cpu 密集型呢

`io密集:大量的操作在硬盘读写上面`    `cpu密集: 大量的操作在占用 cpu`

Node 提供了 child_process 进行进程的创建, 销毁, 通讯

### 创建

child_process 有四个 api 来创建线程

- spawn `以主命令加参数数组的形式创建线程, 子进程以流的形式返回 data 和 err 信息`
- exec `对 spawn 的封装, 可直接传入命令行执行, 以 callback 的形式返回 error`
- execFile `类似于 exec 函数，但默认不会创建命令行环境，将直接以传入的文件创建新的进程，性能略微优于 exec`
- fork `fork 是 spawn 的特殊场景，只能用于创建 node 程序的子进程，默认会建立父子进程的 IPC 信道来传递消息`